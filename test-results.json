{"numTotalTestSuites":13,"numPassedTestSuites":1,"numFailedTestSuites":12,"numPendingTestSuites":0,"numTotalTests":31,"numPassedTests":10,"numFailedTests":21,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1754344779453,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["ChatManager Core Operations","Chat Creation & Management"],"fullName":"ChatManager Core Operations Chat Creation & Management should create chat with auto-incrementing ID","status":"passed","title":"should create chat with auto-incrementing ID","duration":9.568500000000029,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","Chat Creation & Management"],"fullName":"ChatManager Core Operations Chat Creation & Management should create multiple chats with sequential IDs","status":"passed","title":"should create multiple chats with sequential IDs","duration":1.9723999999999933,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","Chat Creation & Management"],"fullName":"ChatManager Core Operations Chat Creation & Management should track chat participants correctly","status":"failed","title":"should track chat participants correctly","duration":7.033799999999928,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'length')\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:142:27\n    at Array.reduce (<anonymous>)\n    at ChatCache.estimateChatMemory (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:141:39)\n    at ChatCache.put (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:104:29)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:434:22\n    at AsyncChatLock.withLock (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:81:34)\n    at ChatManager.addMessage (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:403:26)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:57:25\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","Chat Creation & Management"],"fullName":"ChatManager Core Operations Chat Creation & Management should validate and sanitize chat titles","status":"passed","title":"should validate and sanitize chat titles","duration":2.259400000000028,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","Message Management"],"fullName":"ChatManager Core Operations Message Management should preserve message ordering","status":"failed","title":"should preserve message ordering","duration":1.9035000000000082,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'length')\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:142:27\n    at Array.reduce (<anonymous>)\n    at ChatCache.estimateChatMemory (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:141:39)\n    at ChatCache.put (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:104:29)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:434:22\n    at AsyncChatLock.withLock (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:81:34)\n    at ChatManager.addMessage (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:403:26)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:103:27\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","Message Management"],"fullName":"ChatManager Core Operations Message Management should maintain timestamp accuracy and consistency","status":"failed","title":"should maintain timestamp accuracy and consistency","duration":1.464800000000082,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'length')\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:142:27\n    at Array.reduce (<anonymous>)\n    at ChatCache.estimateChatMemory (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:141:39)\n    at ChatCache.put (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:104:29)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:434:22\n    at AsyncChatLock.withLock (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:81:34)\n    at ChatManager.addMessage (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:403:26)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:118:25\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","Message Management"],"fullName":"ChatManager Core Operations Message Management should validate agent attribution correctly","status":"failed","title":"should validate agent attribution correctly","duration":1.3442000000000007,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'length')\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:142:27\n    at Array.reduce (<anonymous>)\n    at ChatCache.estimateChatMemory (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:141:39)\n    at ChatCache.put (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:104:29)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:434:22\n    at AsyncChatLock.withLock (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:81:34)\n    at ChatManager.addMessage (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:403:26)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:133:25\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","Message Management"],"fullName":"ChatManager Core Operations Message Management should preserve content storage fidelity","status":"failed","title":"should preserve content storage fidelity","duration":1.3885000000000218,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'length')\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:142:27\n    at Array.reduce (<anonymous>)\n    at ChatCache.estimateChatMemory (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:141:39)\n    at ChatCache.put (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:104:29)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:434:22\n    at AsyncChatLock.withLock (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:81:34)\n    at ChatManager.addMessage (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:403:26)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:149:25\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","History Truncation Logic"],"fullName":"ChatManager Core Operations History Truncation Logic should enforce 30k character limit","status":"failed","title":"should enforce 30k character limit","duration":1.7789000000000215,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'length')\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:142:27\n    at Array.reduce (<anonymous>)\n    at ChatCache.estimateChatMemory (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:141:39)\n    at ChatCache.put (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:104:29)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:434:22\n    at AsyncChatLock.withLock (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:81:34)\n    at ChatManager.addMessage (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:403:26)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:169:25\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","History Truncation Logic"],"fullName":"ChatManager Core Operations History Truncation Logic should preserve message boundaries during truncation","status":"failed","title":"should preserve message boundaries during truncation","duration":2.1912999999999556,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'length')\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:142:27\n    at Array.reduce (<anonymous>)\n    at ChatCache.estimateChatMemory (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:141:39)\n    at ChatCache.put (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:104:29)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:434:22\n    at AsyncChatLock.withLock (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:81:34)\n    at ChatManager.addMessage (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:403:26)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:199:27\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","History Truncation Logic"],"fullName":"ChatManager Core Operations History Truncation Logic should handle Unicode characters correctly in truncation","status":"failed","title":"should handle Unicode characters correctly in truncation","duration":1.4595000000000482,"failureMessages":["Error: Message exceeds maximum size limit\n    at ChatManager.addMessage (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:389:15)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:218:25\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\n    at runTest (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","History Truncation Logic"],"fullName":"ChatManager Core Operations History Truncation Logic should log truncation events for debugging","status":"failed","title":"should log truncation events for debugging","duration":2.3309999999999036,"failureMessages":["Error: Message exceeds maximum size limit\n    at ChatManager.addMessage (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:389:15)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:239:25\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\n    at runTest (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","State Management"],"fullName":"ChatManager Core Operations State Management should track agentsWithHistory correctly","status":"failed","title":"should track agentsWithHistory correctly","duration":1.3375999999999522,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'length')\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:142:27\n    at Array.reduce (<anonymous>)\n    at ChatCache.estimateChatMemory (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:141:39)\n    at ChatCache.put (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:104:29)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:434:22\n    at AsyncChatLock.withLock (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:81:34)\n    at ChatManager.addMessage (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:403:26)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:264:25\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","State Management"],"fullName":"ChatManager Core Operations State Management should update lastActivity on message addition","status":"failed","title":"should update lastActivity on message addition","duration":104.07219999999995,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'length')\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:142:27\n    at Array.reduce (<anonymous>)\n    at ChatCache.estimateChatMemory (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:141:39)\n    at ChatCache.put (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:104:29)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:434:22\n    at AsyncChatLock.withLock (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:81:34)\n    at ChatManager.addMessage (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:403:26)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:283:25\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","State Management"],"fullName":"ChatManager Core Operations State Management should handle memory cleanup on chat operations","status":"failed","title":"should handle memory cleanup on chat operations","duration":1.713200000000029,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'length')\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:142:27\n    at Array.reduce (<anonymous>)\n    at ChatCache.estimateChatMemory (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:141:39)\n    at ChatCache.put (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:104:29)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:434:22\n    at AsyncChatLock.withLock (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:81:34)\n    at ChatManager.addMessage (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:403:26)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:296:27\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","List Chats Functionality"],"fullName":"ChatManager Core Operations List Chats Functionality should list all chats with correct metadata","status":"passed","title":"should list all chats with correct metadata","duration":2.788099999999986,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","List Chats Functionality"],"fullName":"ChatManager Core Operations List Chats Functionality should return participant count accurately","status":"failed","title":"should return participant count accurately","duration":1.8374999999999773,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'length')\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:142:27\n    at Array.reduce (<anonymous>)\n    at ChatCache.estimateChatMemory (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:141:39)\n    at ChatCache.put (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:104:29)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:434:22\n    at AsyncChatLock.withLock (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:81:34)\n    at ChatManager.addMessage (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:403:26)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:341:25\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager - Concurrency & Locking","Chat-Level Locking"],"fullName":"ChatManager - Concurrency & Locking Chat-Level Locking should prevent race conditions when multiple agents access same chat","status":"passed","title":"should prevent race conditions when multiple agents access same chat","duration":43.34349999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager - Concurrency & Locking","Chat-Level Locking"],"fullName":"ChatManager - Concurrency & Locking Chat-Level Locking should allow concurrent operations on different chats","status":"passed","title":"should allow concurrent operations on different chats","duration":43.39469999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager - Concurrency & Locking","Chat-Level Locking"],"fullName":"ChatManager - Concurrency & Locking Chat-Level Locking should handle lock timeout for long-running operations","status":"passed","title":"should handle lock timeout for long-running operations","duration":203.33759999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager - Concurrency & Locking","Message Queue Management"],"fullName":"ChatManager - Concurrency & Locking Message Queue Management should process queued messages in FIFO order","status":"failed","title":"should process queued messages in FIFO order","duration":10.493200000000002,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'length')\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:142:27\n    at Array.reduce (<anonymous>)\n    at ChatCache.estimateChatMemory (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:141:39)\n    at ChatCache.put (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:104:29)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:434:22\n    at AsyncChatLock.withLock (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:81:34)\n    at ChatManager.addMessage (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:403:26)\n    at async Promise.all (index 0)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:483:7\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager - Concurrency & Locking","Message Queue Management"],"fullName":"ChatManager - Concurrency & Locking Message Queue Management should handle message processing failures gracefully","status":"failed","title":"should handle message processing failures gracefully","duration":16.297199999999975,"failureMessages":["AssertionError: expected [Function] to throw error including 'Processing failed' but got 'Cannot read properties of undefined (…'\n    at _Assertion.<anonymous> (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1420:16)\n    at _Assertion.<anonymous> (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1029:14)\n    at _Assertion.methodWrapper (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/chai/chai.js:1706:25)\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1639:20\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:498:7\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager - Concurrency & Locking","Resource Management"],"fullName":"ChatManager - Concurrency & Locking Resource Management should enforce chat creation quota per agent","status":"failed","title":"should enforce chat creation quota per agent","duration":3.495900000000006,"failureMessages":["Error: promise resolved \"11\" instead of rejecting\n    at _Assertion.__VITEST_REJECTS__ (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1610:17)\n    at _Assertion.propertyGetter (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/chai/chai.js:1577:27)\n    at Reflect.get (<anonymous>)\n    at Object.proxyGetter [as get] (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/chai/chai.js:1665:22)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:525:7\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager - Concurrency & Locking","Resource Management"],"fullName":"ChatManager - Concurrency & Locking Resource Management should handle memory cleanup for inactive chats","status":"failed","title":"should handle memory cleanup for inactive chats","duration":1.5024000000000797,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'length')\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:142:27\n    at Array.reduce (<anonymous>)\n    at ChatCache.estimateChatMemory (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:141:39)\n    at ChatCache.put (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:104:29)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:434:22\n    at AsyncChatLock.withLock (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:81:34)\n    at ChatManager.addMessage (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:403:26)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:533:7\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager - Error Handling & Edge Cases"],"fullName":"ChatManager - Error Handling & Edge Cases should handle invalid chat ID gracefully","status":"passed","title":"should handle invalid chat ID gracefully","duration":0.9995999999999867,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager - Error Handling & Edge Cases"],"fullName":"ChatManager - Error Handling & Edge Cases should handle concurrent access to same chat","status":"failed","title":"should handle concurrent access to same chat","duration":1.6575000000000273,"failureMessages":["Error: promise rejected \"TypeError: Cannot read properties of unde…\" instead of resolving\n    at _Assertion.__VITEST_RESOLVES__ (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1577:17)\n    at _Assertion.propertyGetter (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/chai/chai.js:1577:27)\n    at Reflect.get (<anonymous>)\n    at Object.proxyGetter [as get] (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/chai/chai.js:1665:22)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:572:38\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager - Error Handling & Edge Cases"],"fullName":"ChatManager - Error Handling & Edge Cases should validate message size limits","status":"passed","title":"should validate message size limits","duration":1.3812000000000353,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager - Error Handling & Edge Cases"],"fullName":"ChatManager - Error Handling & Edge Cases should handle empty agent ID validation","status":"passed","title":"should handle empty agent ID validation","duration":1.2894999999999754,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager - Error Handling & Edge Cases"],"fullName":"ChatManager - Error Handling & Edge Cases should handle database connection failures","status":"failed","title":"should handle database connection failures","duration":2.276299999999992,"failureMessages":["AssertionError: expected [Function] to throw error including 'Database connection lost' but got 'Cannot read properties of undefined (…'\n    at _Assertion.<anonymous> (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1420:16)\n    at _Assertion.<anonymous> (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1029:14)\n    at _Assertion.methodWrapper (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/chai/chai.js:1706:25)\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1639:20\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:608:5\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager - Error Handling & Edge Cases"],"fullName":"ChatManager - Error Handling & Edge Cases should validate agent authorization","status":"failed","title":"should validate agent authorization","duration":2.1610999999999194,"failureMessages":["AssertionError: expected [Function] to throw error including 'Unauthorized access' but got 'Cannot read properties of undefined (…'\n    at _Assertion.<anonymous> (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1420:16)\n    at _Assertion.<anonymous> (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1029:14)\n    at _Assertion.methodWrapper (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/chai/chai.js:1706:25)\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1639:20\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:622:5\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager Implementation Verification - FAILING TEST"],"fullName":"ChatManager Implementation Verification - FAILING TEST FAILS: should fail initially - ChatManager class not yet implemented","status":"failed","title":"FAILS: should fail initially - ChatManager class not yet implemented","duration":1.4431000000000722,"failureMessages":["AssertionError: expected 'Cannot read properties of undefined (…' to contain 'ChatManager'\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:657:29\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}}],"startTime":1754344779983,"endTime":1754344780464.443,"status":"failed","message":"","name":"C:/Users/Eros/Desktop/gemini-mcp-tool/tests/chatManager.test.ts"}]}