{"numTotalTestSuites":13,"numPassedTestSuites":1,"numFailedTestSuites":12,"numPendingTestSuites":0,"numTotalTests":31,"numPassedTests":15,"numFailedTests":16,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1754344395317,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["ChatManager Core Operations","Chat Creation & Management"],"fullName":"ChatManager Core Operations Chat Creation & Management should create chat with auto-incrementing ID","status":"passed","title":"should create chat with auto-incrementing ID","duration":10.614499999999907,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","Chat Creation & Management"],"fullName":"ChatManager Core Operations Chat Creation & Management should create multiple chats with sequential IDs","status":"passed","title":"should create multiple chats with sequential IDs","duration":2.2490999999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","Chat Creation & Management"],"fullName":"ChatManager Core Operations Chat Creation & Management should track chat participants correctly","status":"failed","title":"should track chat participants correctly","duration":11.174100000000067,"failureMessages":["AssertionError: expected [ { …(4) }, { …(4) } ] to include 'alice-test-agent'\n    at Proxy.<anonymous> (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1191:15)\n    at Proxy.<anonymous> (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1029:14)\n    at Proxy.methodWrapper (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/chai/chai.js:1706:25)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:63:34\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","Chat Creation & Management"],"fullName":"ChatManager Core Operations Chat Creation & Management should validate and sanitize chat titles","status":"passed","title":"should validate and sanitize chat titles","duration":2.1113000000000284,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","Message Management"],"fullName":"ChatManager Core Operations Message Management should preserve message ordering","status":"failed","title":"should preserve message ordering","duration":4.641300000000001,"failureMessages":["AssertionError: expected undefined to be 'First message' // Object.is equality\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:109:41\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","Message Management"],"fullName":"ChatManager Core Operations Message Management should maintain timestamp accuracy and consistency","status":"passed","title":"should maintain timestamp accuracy and consistency","duration":1.959100000000035,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","Message Management"],"fullName":"ChatManager Core Operations Message Management should validate agent attribution correctly","status":"failed","title":"should validate agent attribution correctly","duration":2.11220000000003,"failureMessages":["AssertionError: expected undefined to be 'alice-test-agent' // Object.is equality\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:138:39\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","Message Management"],"fullName":"ChatManager Core Operations Message Management should preserve content storage fidelity","status":"failed","title":"should preserve content storage fidelity","duration":2.1878999999998996,"failureMessages":["AssertionError: expected undefined to be 'Message with special characters: !@#$…' // Object.is equality\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:153:41\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","History Truncation Logic"],"fullName":"ChatManager Core Operations History Truncation Logic should enforce 30k character limit","status":"failed","title":"should enforce 30k character limit","duration":2.6399000000000115,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'length')\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:177:80\n    at Array.reduce (<anonymous>)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:177:41\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","History Truncation Logic"],"fullName":"ChatManager Core Operations History Truncation Logic should preserve message boundaries during truncation","status":"failed","title":"should preserve message boundaries during truncation","duration":2.217399999999998,"failureMessages":["TypeError: .toMatch() expects to receive a string, but got undefined\n    at Proxy.<anonymous> (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1165:10)\n    at Proxy.<anonymous> (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1029:14)\n    at Proxy.methodWrapper (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/chai/chai.js:1706:25)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:206:33\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","History Truncation Logic"],"fullName":"ChatManager Core Operations History Truncation Logic should handle Unicode characters correctly in truncation","status":"failed","title":"should handle Unicode characters correctly in truncation","duration":2.6648999999999887,"failureMessages":["Error: Message exceeds maximum size limit\n    at ChatManager.addMessage (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:392:15)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:218:25\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\n    at runTest (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","History Truncation Logic"],"fullName":"ChatManager Core Operations History Truncation Logic should log truncation events for debugging","status":"failed","title":"should log truncation events for debugging","duration":2.693399999999997,"failureMessages":["Error: Message exceeds maximum size limit\n    at ChatManager.addMessage (C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\src\\managers\\chatManager.ts:392:15)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:239:25\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)\n    at runTest (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","State Management"],"fullName":"ChatManager Core Operations State Management should track agentsWithHistory correctly","status":"failed","title":"should track agentsWithHistory correctly","duration":2.013400000000047,"failureMessages":["AssertionError: expected undefined to be defined\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:273:39\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","State Management"],"fullName":"ChatManager Core Operations State Management should update lastActivity on message addition","status":"passed","title":"should update lastActivity on message addition","duration":104.40059999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","State Management"],"fullName":"ChatManager Core Operations State Management should handle memory cleanup on chat operations","status":"passed","title":"should handle memory cleanup on chat operations","duration":17.412799999999947,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","List Chats Functionality"],"fullName":"ChatManager Core Operations List Chats Functionality should list all chats with correct metadata","status":"passed","title":"should list all chats with correct metadata","duration":2.5027999999999793,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager Core Operations","List Chats Functionality"],"fullName":"ChatManager Core Operations List Chats Functionality should return participant count accurately","status":"failed","title":"should return participant count accurately","duration":5.4202999999999975,"failureMessages":["AssertionError: expected 1 to be 3 // Object.is equality\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:349:54\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager - Concurrency & Locking","Chat-Level Locking"],"fullName":"ChatManager - Concurrency & Locking Chat-Level Locking should prevent race conditions when multiple agents access same chat","status":"passed","title":"should prevent race conditions when multiple agents access same chat","duration":36.5856,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager - Concurrency & Locking","Chat-Level Locking"],"fullName":"ChatManager - Concurrency & Locking Chat-Level Locking should allow concurrent operations on different chats","status":"passed","title":"should allow concurrent operations on different chats","duration":29.907100000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager - Concurrency & Locking","Chat-Level Locking"],"fullName":"ChatManager - Concurrency & Locking Chat-Level Locking should handle lock timeout for long-running operations","status":"failed","title":"should handle lock timeout for long-running operations","duration":205.70299999999997,"failureMessages":["Error: promise resolved \"undefined\" instead of rejecting\n    at _Assertion.__VITEST_REJECTS__ (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1610:17)\n    at _Assertion.propertyGetter (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/chai/chai.js:1577:27)\n    at Reflect.get (<anonymous>)\n    at Object.proxyGetter [as get] (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/chai/chai.js:1665:22)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:459:34\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager - Concurrency & Locking","Message Queue Management"],"fullName":"ChatManager - Concurrency & Locking Message Queue Management should process queued messages in FIFO order","status":"passed","title":"should process queued messages in FIFO order","duration":9.563900000000103,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager - Concurrency & Locking","Message Queue Management"],"fullName":"ChatManager - Concurrency & Locking Message Queue Management should handle message processing failures gracefully","status":"passed","title":"should handle message processing failures gracefully","duration":5.8659999999999854,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager - Concurrency & Locking","Resource Management"],"fullName":"ChatManager - Concurrency & Locking Resource Management should enforce chat creation quota per agent","status":"failed","title":"should enforce chat creation quota per agent","duration":3.2245000000000346,"failureMessages":["Error: promise resolved \"11\" instead of rejecting\n    at _Assertion.__VITEST_REJECTS__ (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1610:17)\n    at _Assertion.propertyGetter (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/chai/chai.js:1577:27)\n    at Reflect.get (<anonymous>)\n    at Object.proxyGetter [as get] (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/chai/chai.js:1665:22)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:525:7\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager - Concurrency & Locking","Resource Management"],"fullName":"ChatManager - Concurrency & Locking Resource Management should handle memory cleanup for inactive chats","status":"failed","title":"should handle memory cleanup for inactive chats","duration":2.6345000000001164,"failureMessages":["AssertionError: expected 2 to be +0 // Object.is equality\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:542:48\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager - Error Handling & Edge Cases"],"fullName":"ChatManager - Error Handling & Edge Cases should handle invalid chat ID gracefully","status":"passed","title":"should handle invalid chat ID gracefully","duration":1.0208999999999833,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager - Error Handling & Edge Cases"],"fullName":"ChatManager - Error Handling & Edge Cases should handle concurrent access to same chat","status":"passed","title":"should handle concurrent access to same chat","duration":1.3595000000000255,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager - Error Handling & Edge Cases"],"fullName":"ChatManager - Error Handling & Edge Cases should validate message size limits","status":"passed","title":"should validate message size limits","duration":1.660899999999856,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager - Error Handling & Edge Cases"],"fullName":"ChatManager - Error Handling & Edge Cases should handle empty agent ID validation","status":"passed","title":"should handle empty agent ID validation","duration":1.544499999999971,"failureMessages":[],"meta":{}},{"ancestorTitles":["ChatManager - Error Handling & Edge Cases"],"fullName":"ChatManager - Error Handling & Edge Cases should handle database connection failures","status":"failed","title":"should handle database connection failures","duration":2.8807999999999083,"failureMessages":["Error: promise resolved \"{ success: true, …(1) }\" instead of rejecting\n    at _Assertion.__VITEST_REJECTS__ (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1610:17)\n    at _Assertion.propertyGetter (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/chai/chai.js:1577:27)\n    at Reflect.get (<anonymous>)\n    at Object.proxyGetter [as get] (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/chai/chai.js:1665:22)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:610:5\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n    at new Promise (<anonymous>)\n    at runWithTimeout (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)"],"meta":{}},{"ancestorTitles":["ChatManager - Error Handling & Edge Cases"],"fullName":"ChatManager - Error Handling & Edge Cases should validate agent authorization","status":"failed","title":"should validate agent authorization","duration":2.3233999999999924,"failureMessages":["Error: promise resolved \"{ success: true, …(1) }\" instead of rejecting\n    at _Assertion.__VITEST_REJECTS__ (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/expect/dist/index.js:1610:17)\n    at _Assertion.propertyGetter (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/chai/chai.js:1577:27)\n    at Reflect.get (<anonymous>)\n    at Object.proxyGetter [as get] (file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/chai/chai.js:1665:22)\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:624:5\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["ChatManager Implementation Verification - FAILING TEST"],"fullName":"ChatManager Implementation Verification - FAILING TEST FAILS: should fail initially - ChatManager class not yet implemented","status":"failed","title":"FAILS: should fail initially - ChatManager class not yet implemented","duration":2.5540000000000873,"failureMessages":["AssertionError: expected 'expected undefined to be \\'Test messa…' to contain 'ChatManager'\n    at C:\\Users\\Eros\\Desktop\\gemini-mcp-tool\\tests\\chatManager.test.ts:657:29\n    at file:///C:/Users/Eros/Desktop/gemini-mcp-tool/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}}],"startTime":1754344395964,"endTime":1754344396451.554,"status":"failed","message":"","name":"C:/Users/Eros/Desktop/gemini-mcp-tool/tests/chatManager.test.ts"}]}